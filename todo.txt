Now:
   Windows - Global hotkeys don't show in settings tab until you try to set one, then they all appear

   Windows - You can replace the hex version of "javaw.exe" with "hypno.exe" to get a reasonable-named process

   Windows - Select Multiple Files - No Option to play in Hypnos. Add that

   Start playing when a track or tracks are loaded from socket

	CLI Issues
		Select Multiple Files in File Browser, Right click, open with Hypnos -
			Not all the tracks appear on the current list, and it doesn't start playing the first one
			Also the pause button kinda bugs out
			
		When loading files from the commandline and you give a relative path, it assumes its relative to hypnos's directory, not the user.
	
		Calling commandline switches at the appimage exits before output is printed. Kinda lame
		
	Export playlist as a folder
		Copy all of the music files into that folder. Prepend them with index number? 
		Warn if the total copy is larger than X MB or more than X tracks
	
General
	Marketa Irglova Album -- keeps doing that, then ui crashes
		Jan 11, 2018 00:02:21 AM net.joshuad.hypnos.audio.decoders.FlacDecoder playSingleFrame
		INFO: Error reading block from flac file.
		net.joshuad.hypnos.audio.decoders.FlacDecoderLogic$FormatException: Sync code expected
			at net.joshuad.hypnos.audio.decoders.FlacDecoderLogic.readNextBlock(Unknown Source)
			at net.joshuad.hypnos.audio.decoders.FlacDecoder.playSingleFrame(Unknown Source)
			at net.joshuad.hypnos.audio.AudioPlayer.runPlayerThread(Unknown Source)
			at net.joshuad.hypnos.audio.AudioPlayer.lambda$new$0(Unknown Source)
			at java.lang.Thread.run(Thread.java:748)
			
		It didn't happen again

	Allow each playlist to specify their sort order
	
	I emptied the current list and library and playing track, and the art stayed. probably good to get rid of that

	Select two unrelated albums -> Right click play -> no change to shuffle, i expected it to set it to sequential
		Maybe add a "Multiple Albums" type
	
	Set an option to sort by album artist instead of artist on artist column in current list
	
	If you delete a list of tracks down so that it matches an album, set title bar to that album

	KDE Neon
		Can't drag and drop an mp3 into hypnos
			onDragOver doesn't seem to hear the drag event. 
		
		User said it opened the track instead of opening folder. Confirmed on KDE Neon image on my computer, it opened gwenview 
			https://stackoverflow.com/questions/48131760/desktop-getdesktop-open-folder-in-kde-opens-up-gwenview-instead-of-dolphin
		
	Refactor Library
		If you load albumsAndTracks but not sources Hypnos acts real wierd. Goes back and forth between not responding. On Windows confirmed. 
			Does not happen on linux, but still, this is a wierd state -- library without sources. 
			
		Make a source directory a class, not just a path.
			Library Source Directories - highlight in red if they are missing. 

		An album will form from tracks if you edit them and they aren't currently an album. But an album won't split if you edit tags and make it not be an album.
			Is this desired behavior? I feel like probably no -- it can create different states based on the same disk contents, which doesn't make sense
					
		Sometimes there are duplicated tracks in the track list
		
		When removing all sources, it takes a long time to remove everything (5+ seconds)
			This is because of the processWatcherEvents function taking lots of time on load. 
			
		Setup a currentList.updateAlbum and updatePlaylist system
			Doesn't change artwork
			CurrentplayingTrack is the same one
			updates data and locations
			
		Library load and unload time
		
		Loader status % complete thing
		
		Allow sources to be hidden
		
		Maybe allow a filter for file type and lossy vs not lossy
			Maybe just a special search text "type:mp3", "type:lossy"
			I dunno making search box script is alot. 
		
		Give user feedback about the disk scanner and the abiliyt to control it	
	
	Drag and drop from misc places to system
		playlist table -> m3u
		track table, history, queue, info windows, current table -> single tracks
		album table -> folder
		
	Hover effects on transparent image buttons
		Settings Button
		Volume button
		https://stackoverflow.com/questions/47765228/is-it-possible-to-set-tthe-hsv-for-a-color-adjust-via-css
		settingsButton.setOnMouseEntered( e -> settingsImage.setEffect( this.darkThemeButtonsHover ) );
		settingsButton.setOnMouseExited( e -> settingsImage.setEffect( isDarkTheme()? darkThemeButtons : null ) );
		This is kind of a pain. We need to hard code the values, convert from hsv to color adjust, and also probably have white button images instead of black. 
		
	Windows 7 - Songs with strange characters display as noise -- Neon Genesis Evangelion
	
	Interface with Last.fm scrobbler
		https://github.com/jkovacs/lastfm-java
		https://github.com/thomwiggers/lastfm-java
		https://stackoverflow.com/questions/22766572/last-fm-java-api-get-recenttracks-of-a-user-within-a-data-range

	Missing tracks are deleted from currentlist after restart if CurrentList.mode == ALBUM instead of remaining and being highlighted in red

	Redo global hotkeys, do it on a system-by-system type basis.
		https://stackoverflow.com/questions/79658/react-on-global-hotkey-in-a-java-program-on-windows-linux-mac
		Some Global Hotkeys aren't consumed - Win + C, Win + X, etc.  
			
		Windows:
			jkeymaster - windows + x keys not supported
			
			JHotKeys - I can't find a jar, and having trouble building one. 
		
			JNativeHook: Hotkey consumption for win keys is bad -- if you press win + v it works, but if you release the win button first, stuff breaks badly 
				
		Linux
			http://sourceforge.net/projects/jxgrabkey/
			
			JNativeHook - No consumption of hotkey

	Tag auto fix button

	Bug report dialog
		
	Maybe add sorting of roman numerals? 
		https://gist.github.com/julienhaversano/9197588
	
	Show in tag edit window when a file doesn't support a particular tag type
	
	If something gets dropped into config/playlists, update the UI to include it? 
	
	Memory Hog issue	
		With an empty library and no current list and nothing loaded uses about 175mb on Windows 7.
			Clicking around the UI and using every UI feature except for loading library or tracks can climb it to about 300mb
			loading a folder of 58 albums climbs the usage to ~400mb. Removing seems to push it to 411mb
			loading a folder of 2460 albums climbs to the usage to 1.7GB
			closing and reopening 
			closing and reopening:
				drives it up to 1.4gb + (i'm sure it would keep going for a while longer)
				with library loader and library updater disabled puts the memory at 320mb
				with updater disabled puts the memory at 1.2+ (probably would've kept climbing)
				with loader disabled it stops at ~367mb. 
			
			SO loader is a source of memory consumption definitely. 
				-Xmx600m fixed this on windows 7. Kept it floating around 450mb. 
			
		loading images definitely makes it real bad. Fixing that will help, but won't solve it. 
		
		scrolling up and down the album or track table table does increase memory usage, but "only" by 100-200mb. 
		
		Start Hypnos
		Load a big library ( /d/music)
		Let it finish loading
		Close and reopen hypnos
		1.6GB memory footprint
		
		Start Hypnos
		Load a big library (/d/music)
		during load -- 1.26GB
		after load - 721MB
		after restart hypnos - 1.5GB
		it seems to stay there. I let it run for about 10 minutes, no drop in memory usage. 
		
		stopping the libraryUpdater and libraryLoader seems to cut into the problem tremendously
		
		Even after stopping updater and loader, it creeps up. It looks like everytime a new song is played?
			confirmed. Each new song spikes the memory. Just flipping through the songs without playing them causes it
				Is this related to the skipping issue? - doesn't seem to be with one or two tracks after ramping up the memory
			Was able to get it to 3 GB just by flipping through tracks. Could probably go higher. 
		
		flipping through tracks quickly by hitting next button also causes memory spike. Not terrible. 
				
		2017/12/25 - I was able to temper this problem significantly by having only one image loader thread and by setting -Xmx

	Playlist throttled filter, but man, who's going to have over 1000 playlists? 

	Search for artist / album image data possibilities online, show in a window, let user choose. 

:::: Lyric Failures ::::

	
:::: Java / JavaFX stuff ::::
	Window shows as a little sliver before appearing fully, ditto for settings window
	
	Get java to release memory back sometimes. We use a lot on load
		https://stackoverflow.com/questions/30458195/does-gc-release-back-memory-to-os
      Apparently it can be done with hotspot jvm. Need to research

	Windows - Volume takes a split second to change.
  g   https://stackoverflow.com/questions/48183626/delay-when-changing-audio-volume-on-windows
      I also posted a bug report

	Review and include this answer
      https://stackoverflow.com/questions/48144750/how-can-i-debug-a-nullpointerexception-where-the-stacktrace-doesnt-reference-my/48145928#48145928
      1/10 - I did this, and it makes the UI feel worse. Not sure how to deal w/ that. Maybe I just catch the exception
      and move on with life instead

   Scroll speed on lyrics scroll pane when the lyrics almost-but-dont-quite fit one full screen is really slow. 
   
   Don't allow tag table columns to be reordered
   
	Try to fit all data in current list table by adjusting columns that aren't no-resize on setCurrentList, if not possible, do nothing
		I did some work on this. It conflicts with our FormattedAlbumCell because there, to keep it from wrapping
		we setminwidth to double.max, causing the fit function to fail. 
		I used the reflection stuff from this thread, and I think it would've worked if not for this issue:
			https://stackoverflow.com/questions/23284437/javafx-tablecolumn-resize-to-fit-cell-content
		Of course, I would have to then check table width, fail gracefully and revert, or distribute excess space. 
		
	Add a ton of albums to the current list. (close and reopen hypnos?) Ctrl + A, delete. Exception. UI is broken

	Resize Policy
		Windowed mode, shrink window until a scrollbar appears. Maximize window so scrollbar disappears -- Scrollbar width is still accounted for
		
		Scrollbar width is calculated wrong by 4 pixels. I have it hardcoded, but I posted a SE question
			https://stackoverflow.com/questions/47852175/get-full-width-of-scrollbar-for-a-tableview
					
	Double clicking on table-column dividers doesn't call resize:
		https://stackoverflow.com/questions/47852239/customresizepolicy-not-triggering-when-a-columns-headers-divider-is-double-cli
			
	Tray Icon
		I have a few demos that are all terrible. It looks like we need to wait for JavaFX to get this going for us. 
		Or maybe just show an icon with no menus. Kinda hate that. How do we exit? 
		Gnome 3 doesn't support. Code works but creates a bad entry on taskbar.
		What systems do support? 
		What other systems don't support? How to handle? 
		https://stackoverflow.com/questions/29995727/java-systemtray-icon-does-not-always-work
	
	Tiny drop shadow on transport buttons when in dark theme. It's the line HBox, VBox, #transport { ... -fx-background-color: #222222 ... }
	
	Showing any dialog prevents window drag resize in ubuntu / other linux?
		http://bugs.java.com/bugdatabase/view_bug.do?bug_id=8140491
		https://stackoverflow.com/questions/33134791/javafx-stage-cant-be-resized-after-showing-a-dialog
	
	While loading the library, the table view scrolls a little bit. 
		https://stackoverflow.com/questions/47950917/stop-tableview-small-scroll-when-adding-content-to-bottom-of-table
		1/2/18 - Bug submitted to bugs.java.com
		
	Inconsistent eyEvent consumption - https://stackoverflow.com/questions/48054928/inconsistent-keyevent-consumption-by-textfield
		Resolved in java 9 apparently
	
	Java 9
		Using java 9 to launch hypnos crashes. I can't get either OpenSDK or OracleSDK to run, for different reasons
			WARNING: An illegal reflective access operation has occurred
			WARNING: Illegal reflective access by net.joshuad.hypnos.Hypnos (file:/home/joshua/workbench/hypnos-9-test/hypnos.jar) to field java.lang.ClassLoader.sys_paths
			WARNING: Please consider reporting this to the maintainers of net.joshuad.hypnos.Hypnos
			WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
			WARNING: All illegal access operations will be denied in a future release
			

:::: Refactor / organize my code ::::

 	Make LibraryUpdater part of Library. Is there a way to abstract out the Platform -> RunLater part? I feel like we're just stuck w/ that, which kind of ties to us JavaFX. 
 		Maybe ui.runMe ( Runnable ), and then the UI can decide whether to launch a new thread, have a thread idling, do it on this thread, or use something like Platform.runLater()	
	
	a better structure for persister
	
	a better structure for hotkey commands (maybe combine with commandline commands?)
		
:::: Decoders ::::

	Playback Problems
		Ogg - In general OGG playback is garbage. 
			seeking is done using read() instead of skip(), so it's slow.
			three-silver.ogg takes a long time to load and stop. Not sure about seek.
			
		Wav
			organfinale.wav - 	java.lang.IllegalArgumentException: No line matching interface SourceDataLine 
								supporting format PCM_FLOAT 44100.0 Hz, 32 bit, stereo, 8 bytes/frame,  is supported.
								I can look at downsampling: http://www.jsresources.org/examples/SampleRateConverter.html
			
		Apple lossless codec (m4a) - no support					
			https://github.com/soiaf/Java-Apple-Lossless-decoder
			
		m4b	- Currently disabled in AudioPlayer.java -> getDecoder 
			https://stackoverflow.com/questions/44750751/why-are-m4bs-playing-at-faster-speeds
			I need to set the sample rate to one of these: 96000, 88200, 64000, 48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000, 7350 
			The files seem te report the wrong sample rate. JAAD acutally reads them. 
		
			acts: 11025 - > reports 44100
			artofwar: 11025 -> reports 22050
			cardtrick: 22050 -> reports 44100
			whitefang: 16000 -> reports 44100
			
		m4a - no known problems
			
		flac - no known problems, but 24bit files give me the volume issue on at least linux
			I can look at downsampling: http://www.jsresources.org/examples/SampleRateConverter.html
			I'm also fine w/ how things are I think. 
			Guessing this problem is isolated to my system and my strange sound card. 
			
		mp3 - No known issues
			
			
	Play mounted audio cd
		http://www.jsresources.org/examples/CddaPlayer.java.html

:::: OS Specific ::::
	
	Windows
		NSIS
			Version number dynamically assigned
			
			Open-with shell integration
				http://nsis.sourceforge.net/Add_your_app_in_each_EXE_in_the_context_menu
				
				This is pretty close. It makes an entry but it doesn't work. Could be a lot of different problems.
				WriteRegStr HKCR ".flac\shell\Hypnos\command" "" "$INSTDIR\Hypnos.exe $\"%1$\""
				
		When you launch show busy mouse cursor

		https://sourceforge.net/p/launch4j/discussion/332684/thread/75bbbd93/
		https://stackoverflow.com/questions/7506329/embed-java-into-a-c-application
	
	Linux
		http://blog.noizeramp.com/2005/08/31/packaging-java-applications-for-ubuntu-and-other-debians/
	
Key Testing before next release:
	Make sure browse button still works in various systems. I changed FXUI.openFileBrowser -- Desktop.getDesktop().open() to .browse()
      Ok in windows

	Try deleting settings and seeing if the UI lays out properly
      Ok in windows

	Try resetting tables to defaults manually
      Ok windows
      
	Try out the throttled table filters on different sytems, see if stuff breaks
      Seems OK windows

	Test the CLI
	
	Settings load and load appearance
	
	
